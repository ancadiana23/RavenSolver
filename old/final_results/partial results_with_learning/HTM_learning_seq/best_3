    """
    Define, train and test a network of spatial pooler and temporal memory layers
    """
    # dimenstions
    num_colls1 = len(problems[0]['Input'][0])
    num_colls2 = num_colls1

    #num_colls2 = min([num_colls1, num_colls3]) + abs(num_colls1 - num_colls3) / 2

    # layers
    sp1 = SpatialPooler(inputDimensions=(num_colls1, ),
                        columnDimensions=(num_colls2, ),
                        numActiveColumnsPerInhArea=-1,
                        localAreaDensity=0.05)
    '''
    sp2 = SpatialPooler(inputDimensions=(num_colls2, ),
                        columnDimensions=(num_colls3, ),
                        numActiveColumnsPerInhArea=-1,
                        localAreaDensity=0.05)
    '''
    #print(num_colls1, num_colls2, num_colls3)

    #minThr = int(numColls1 ** 0.33 / 2) + 3
    #actThr = int(numColls1 ** 0.33 / 2) + 3

    print(minThr, actThr) # 10 10
    bckTM = BTM(numberOfCols=num_colls2, cellsPerColumn=15,
                initialPerm=0.5, connectedPerm=0.5,
                minThreshold=minThr, newSynapseCount=10,
                activationThreshold=actThr,
                pamLength=10)

    layers = [(sp1, sp_compute),
              (bckTM, bk_tm_compute)]

    #layers = [(bckTM, bk_tm_compute)]

    #train_first_row(layers, problems)
    train(layers, problems)
    test(layers, problems)

===================================================
for i in np.random.permutation(len(problems)):
===================================================


---------------------- Agent ------------------------


(10, 10)
[ 1.00000008  1.00000001  0.67719257  0.99648843  0.99633272  1.00000007
  0.99583251  0.98599127  0.99799925  0.99778089  1.00000002  0.99586784
  0.99300701  0.98828031  0.99644948  0.79245284  1.00000001  0.99197995
  1.00000005  0.98726116  0.99999996  0.99721877  0.92570563  0.99085887
  0.98705505  0.99799925  0.98432774  0.99504949]
(28, 28)
97.3968972674

real	38m52.572s
user	38m22.100s
sys	0m2.336s
anca@Blue:~/Current_Semester/Licenta/RavenSolver$ time python2 main/agent.py

(10, 10)
[ 1.00000006  0.9821429   1.00000002  0.98576836  0.99999995  0.98854706
  0.99673204  0.9909534   0.99632347  0.9967267   0.99315785  0.99214661
  1.00000002  0.9898477   0.9936177   0.99650945  0.99999999  0.98802322
  0.99382713  0.99548535  0.99999994  0.99256498  0.93687854  0.98568023
  0.99460914  0.99632347  1.00000002  0.99822425]
(28, 28)
99.228891221

real	44m56.016s
user	43m50.800s
sys	0m4.996s


---------------------- SDRs ------------------------

(10, 10)
[ 0.98461539  0.79505636  0.99999997  1.00000001  0.95555558  0.92452822
  0.89594484  1.          0.95308164  0.97142858  0.99999999  0.97727276
  0.99999997  0.98181825  0.972973    0.99999997  0.99999994  0.99999994
  0.9821429   1.00000007  0.98360661  0.99999994  1.00000007  0.99999993
  0.95833328  0.95308164  0.97619049  1.00000003]
(28, 28)
97.3772477891

real	8m46.818s
user	7m43.788s
sys	0m1.312s
anca@Blue:~/Current_Semester/Licenta/RavenSolver$ time python2 main/agent.py --data sdrs
(10, 10)
[ 1.00000003  0.96363633  0.97674418  0.99999989  0.94835215  0.93684533
  0.99999998  0.97435899  1.00000005  0.99999997  0.9782608   0.93928709
  0.99999994  1.00000006  0.99999997  0.9815193   0.87055628  0.99999999
  0.94117653  1.          0.9821428   0.98113209  1.          1.00000004
  0.98393836  1.00000005  1.00000002  1.00000006]
(28, 28)
98.064108133

real	7m16.724s
user	6m54.816s
sys	0m0.864s


---------------------- Symbolic ------------------------

(10, 10)
[ 1.00000004  1.00000002  0.99999994  0.99999997  0.          0.
  1.00000008  1.00000003  0.          0.          0.99999998  0.          0.
  1.00000004  0.          1.00000001  0.99999997  0.          0.          0.
  0.          0.          1.00000003  0.          0.          1.          0.
  0.        ]
(12, 28)
42.857143223

real	4m41.414s
user	4m10.208s
sys	0m0.748s
anca@Blue:~/Current_Semester/Licenta/RavenSolver$ time python2 ./main/agent.py --data symbolic
(10, 10)
[ 0.          0.95034549  1.00000001  0.99999998  0.99999993  1.00000001
  0.99999987  0.99999994  1.00000003  1.00000006  0.99999998  0.99999996
  0.97142858  1.00000002  1.00000002  0.78571185  0.          1.00000002
  0.99999994  1.00000006  1.00000004  1.00000006  1.00000001  1.00000003
  1.00000003  0.99999994  1.00000001  0.94117653]
(26, 28)
91.6023657125

real	6m6.576s
user	5m10.280s
sys	0m1.264s

(10, 10)
[ 1.00000001  1.          1.00000002  1.00000001  0.99999998  0.99999994
  0.          1.00000001  0.99999998  0.99999998  0.99999994  0.92105257
  0.          0.99999997  1.00000001  1.00000006  1.00000004  1.00000006
  0.99999994  1.00000003  0.96774191  0.          0.99999994  1.00000002
  0.99999998  1.00000001  0.          0.99999997]
(24, 28)
85.3171227234

real	4m15.240s
user	4m7.288s
sys	0m0.608s
anca@Blue:~/Current_Semester/Licenta/RavenSolver$ time python2 ./main/agent.py --data symbolic
(10, 10)
[ 0.          0.97435892  0.          1.00000001  0.          1.
  1.00000003  0.          1.00000001  1.00000004  0.          0.99999992
  1.00000001  0.99999998  0.          1.00000007  0.          0.99999998
  0.          0.          0.          0.          0.          0.
  1.00000001  0.          0.          0.79999995]
(13, 28)
45.6227104313

real	5m13.074s
user	4m53.188s
sys	0m0.588s

